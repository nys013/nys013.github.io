(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{543:function(e,t,s){e.exports=s.p+"assets/img/1.699855ca.png"},544:function(e,t,s){e.exports=s.p+"assets/img/2.0247d3b3.png"},545:function(e,t,s){e.exports=s.p+"assets/img/3.8e3750cb.png"},546:function(e,t,s){e.exports=s.p+"assets/img/4.88690f09.png"},547:function(e,t,s){e.exports=s.p+"assets/img/5.0472ac89.png"},548:function(e,t,s){e.exports=s.p+"assets/img/7.e8d73465.png"},549:function(e,t,s){e.exports=s.p+"assets/img/8.4d9f08e1.png"},550:function(e,t,s){e.exports=s.p+"assets/img/9.36cf77b6.png"},584:function(e,t,s){"use strict";s.r(t);var a=s(2),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"升级vue为v3-4-x出现问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#升级vue为v3-4-x出现问题"}},[e._v("#")]),e._v(" 升级"),t("code",[e._v("Vue")]),e._v("为v3.4.x出现问题")]),e._v(" "),t("p",[e._v("当前"),t("code",[e._v("Vue")]),e._v("版本为3.3.x，想升级"),t("code",[e._v("Vue")]),e._v("到3.4.x版本，但升级后，"),t("code",[e._v("ant-design-vue")]),e._v(" 3.x 版本的"),t("code",[e._v("Modal")]),e._v("函数方法有问题，如"),t("code",[e._v("Modal.confirm")]),e._v("打开后，取消确认按钮回调能执行，但是弹窗却无法关闭")]),e._v(" "),t("p",[e._v("于是到github的"),t("code",[e._v("ant-design-vue")]),e._v("库找的相关issue\n"),t("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/issues/7375",target:"_blank",rel:"noopener noreferrer"}},[e._v("#7375"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/issues/7239",target:"_blank",rel:"noopener noreferrer"}},[e._v("#7239"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("code",[e._v("ant-design-vue")]),e._v("团队合并了"),t("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/pull/7244/files",target:"_blank",rel:"noopener noreferrer"}},[e._v("pr"),t("OutboundLink")],1),e._v("并关掉了相关issue，但是修复代码只在4.x版本后，3.x仍存在该问题。相关修复如下：")]),e._v(" "),t("p",[t("img",{attrs:{src:s(543),alt:"alt text"}}),e._v(" "),t("img",{attrs:{src:s(544),alt:"alt text"}})]),e._v(" "),t("p",[e._v("而升级"),t("code",[e._v("ant-design-vue")]),e._v(" 4.x是破坏性升级，涉及到很多地方变动，没有办法升级。所以当时的解决方案是："),t("strong",[t("code",[e._v("Vue")]),e._v("版本固定在v3.3，"),t("code",[e._v("ant-design-vue")]),e._v("版本固定为v3.x")])]),e._v(" "),t("p",[e._v("但这样就不能用"),t("code",[e._v("Vue")]),e._v(" 3.4的新特性了")]),e._v(" "),t("h2",{attrs:{id:"升级vue为v3-5-x解决问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#升级vue为v3-5-x解决问题"}},[e._v("#")]),e._v(" 升级"),t("code",[e._v("Vue")]),e._v("为v3.5.x解决问题")]),e._v(" "),t("p",[e._v("因为还是想用"),t("code",[e._v("Vue")]),e._v("3.4的新特性，有空时去看"),t("code",[e._v("ant-design-vue")]),e._v("的issue，看会不会针对3.x版本修复这一问题，但应该是不会有的，不过发现有条评论说“"),t("code",[e._v("Vue")]),e._v("v3.5.13修复了这一问题”")]),e._v(" "),t("p",[e._v("然后就去升级试试，发现是v3.5.0修复了，升级v3.5.x后"),t("code",[e._v("Modal.confirm")]),e._v("弹窗顺利关闭了（不确定升级为v3.5.x是否会有其他问题，升级后需要在测试环境多多运行验证）")]),e._v(" "),t("h3",{attrs:{id:"v3-5是怎么解决的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#v3-5是怎么解决的"}},[e._v("#")]),e._v(" v3.5是怎么解决的？")]),e._v(" "),t("p",[e._v("好奇v3.5是怎么解决的，就去github上看"),t("code",[e._v("Vue")]),e._v("的相关issue，看到有人提到和"),t("code",[e._v("ant-design-vue")]),e._v("的"),t("a",{attrs:{href:"https://github.com/vuejs/core/issues/9973",target:"_blank",rel:"noopener noreferrer"}},[e._v("相关问题"),t("OutboundLink")],1),e._v("，不过看"),t("a",{attrs:{href:"https://github.com/vuejs/core/blob/main/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Vue")]),e._v("的v3.5.0更新日志"),t("OutboundLink")],1),e._v("并没有提到这一issue，也没有找到其他相关更新说明")]),e._v(" "),t("p",[e._v("就根据"),t("code",[e._v("ant-design-vue")]),e._v("的修复代码，推测是"),t("code",[e._v("Vue")]),e._v(" v3.4被改动的"),t("code",[e._v("update")]),e._v("方法，在v3.5又改回来了")]),e._v(" "),t("p",[t("img",{attrs:{src:s(545),alt:"alt text"}})]),e._v(" "),t("p",[e._v("然后就去看"),t("code",[e._v("Vue")]),e._v("源码，推测相关改动（没有完整看完源码，是凭借关键字和代码提交时间推测的）")]),e._v(" "),t("p",[e._v("看下图代码改动，可以看出3.4版本判断了"),t("code",[e._v("effect.dirty")]),e._v("才去执行的，而3.4前和3.5后都是没有判断的。3.5后增加了"),t("code",[e._v("job")]),e._v("，"),t("code",[e._v("runIfDirty")]),e._v("执行，而"),t("code",[e._v("update")]),e._v("改回为无判断执行")]),e._v(" "),t("p",[e._v("左边为3.4后提交的，右边为3.5后提交的\n"),t("img",{attrs:{src:s(546),alt:"alt text"}})]),e._v(" "),t("p",[e._v("左边为3.4前提交的，右边为3.4后提交的\n"),t("img",{attrs:{src:s(547),alt:"alt text"}})]),e._v(" "),t("h2",{attrs:{id:"升级后的新特性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#升级后的新特性"}},[e._v("#")]),e._v(" 升级后的新特性")]),e._v(" "),t("p",[e._v("从"),t("code",[e._v("vue")]),e._v("3.3升级到"),t("code",[e._v("vue")]),e._v("3.5的新特性，具体可看更新文档")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://blog.vuejs.org/posts/vue-3-4",target:"_blank",rel:"noopener noreferrer"}},[e._v("3.4更新文档"),t("OutboundLink")],1),e._v("\n（"),t("a",{attrs:{href:"https://juejin.cn/post/7317809451187208218?searchId=20250902174214673E19C04CEE8A1C2F50",target:"_blank",rel:"noopener noreferrer"}},[e._v("翻译版：https://juejin.cn/post/7317809451187208218?searchId=20250902174214673E19C04CEE8A1C2F50"),t("OutboundLink")],1),e._v("）")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://blog.vuejs.org/posts/vue-3-5",target:"_blank",rel:"noopener noreferrer"}},[e._v("3.5更新文档"),t("OutboundLink")],1),e._v("\n（"),t("a",{attrs:{href:"https://juejin.cn/post/7410316451962142731?searchId=20250902175718A2E7B5955736D621881D",target:"_blank",rel:"noopener noreferrer"}},[e._v("翻译版：https://juejin.cn/post/7410316451962142731?searchId=20250902175718A2E7B5955736D621881D"),t("OutboundLink")],1),e._v("）")]),e._v(" "),t("h3",{attrs:{id:"其中比较有用的api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其中比较有用的api"}},[e._v("#")]),e._v(" 其中比较有用的api")]),e._v(" "),t("h4",{attrs:{id:"definemodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#definemodel"}},[e._v("#")]),e._v(" "),t("code",[e._v("defineModel()")])]),e._v(" "),t("p",[e._v("3.4新增"),t("code",[e._v("defineModel()")]),e._v("，更方便地定义双向绑定，具体可看"),t("a",{attrs:{href:"https://cn.vuejs.org/api/sfc-script-setup#definemodel",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("在之前的版本，双向绑定是通过"),t("code",[e._v("defineProps")]),e._v("和"),t("code",[e._v("defineEmits")]),e._v("，有时再结合使用"),t("code",[e._v("vueuse")]),e._v("中的"),t("code",[e._v("useVModel")]),e._v("完成。")]),e._v(" "),t("p",[e._v("在3.4就可以直接使用一个"),t("code",[e._v("defineModel()")]),e._v("更快速的实现了，其底层辅助函数是"),t("a",{attrs:{href:"https://cn.vuejs.org/api/composition-api-helpers#usemodel",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("useModel()")]),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 一般写法")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" isVisible "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("defineModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'visible'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  type"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Boolean"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  required"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 用ts的写法")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" isVisible "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token generic-function"}},[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("defineModel")]),t("span",{pre:!0,attrs:{class:"token generic class-name"}},[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("boolean")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")])])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'visible'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" required"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),t("h4",{attrs:{id:"props-解构默认值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#props-解构默认值"}},[e._v("#")]),e._v(" "),t("code",[e._v("Props")]),e._v(" 解构默认值")]),e._v(" "),t("p",[e._v("3.5+新增"),t("code",[e._v("Props")]),e._v("解构默认值，更方便地设置默认值，具体可看"),t("a",{attrs:{href:"https://cn.vuejs.org/guide/typescript/composition-api#props-default-values",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("在之前的版本，"),t("code",[e._v("props")]),e._v("解构的写法并不能设置默认值，所以是用"),t("code",[e._v("withDefaults")]),e._v("设置默认值。")]),e._v(" "),t("p",[e._v("在3.5+后就可以直接以解构的方式设置来默认值，且仍可以保留响应式。")]),e._v(" "),t("p",[e._v("如果担心用解构写法后不好区分"),t("code",[e._v("props")]),e._v("，可以在Vue (Official)插件设置开启相关提示")]),e._v(" "),t("p",[t("img",{attrs:{src:s(548),alt:"alt text"}})]),e._v(" "),t("blockquote",[t("p",[e._v("注意：升级3.5后"),t("code",[e._v("withDefaults")]),e._v("仍可使用，但不要在同一个"),t("code",[e._v("props")]),e._v("同时使用解构和"),t("code",[e._v("withDefaults")])])]),e._v(" "),t("h4",{attrs:{id:"usetemplateref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usetemplateref"}},[e._v("#")]),e._v(" "),t("code",[e._v("useTemplateRef()")])]),e._v(" "),t("p",[e._v("3.5+ 新增"),t("code",[e._v("useTemplateRef()")]),e._v("获取模板引用")]),e._v(" "),t("p",[e._v("在之前的版本，使用与静态 "),t("code",[e._v("ref")]),e._v("属性名称匹配的普通引用。")]),e._v(" "),t("p",[e._v("在3.5+后就可以使用"),t("code",[e._v("useTemplateRef()")]),e._v(" ，在运行时字符串ID匹配引用，因此支持将动态引用绑定到变化的ID")]),e._v(" "),t("p",[e._v("结合插件的升级，会有模板引用字符串的提示和组件相关提示，开发体验更好")]),e._v(" "),t("p",[t("img",{attrs:{src:s(549),alt:"alt text"}}),t("img",{attrs:{src:s(550),alt:"alt text"}})]),e._v(" "),t("Vssue",{staticClass:"theme-default-content content__default"})],1)}),[],!1,null,null,null);t.default=r.exports}}]);