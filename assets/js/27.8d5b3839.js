(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{542:function(t,e,s){t.exports=s.p+"assets/img/1.699855ca.png"},543:function(t,e,s){t.exports=s.p+"assets/img/2.0247d3b3.png"},544:function(t,e,s){t.exports=s.p+"assets/img/3.8e3750cb.png"},545:function(t,e,s){t.exports=s.p+"assets/img/4.88690f09.png"},546:function(t,e,s){t.exports=s.p+"assets/img/5.0472ac89.png"},547:function(t,e,s){t.exports=s.p+"assets/img/7.e8d73465.png"},548:function(t,e,s){t.exports=s.p+"assets/img/8.4d9f08e1.png"},549:function(t,e,s){t.exports=s.p+"assets/img/9.36cf77b6.png"},584:function(t,e,s){"use strict";s.r(e);var a=s(2),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"升级vue为v3-4-x出现问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级vue为v3-4-x出现问题"}},[t._v("#")]),t._v(" 升级"),e("code",[t._v("Vue")]),t._v("为v3.4.x出现问题")]),t._v(" "),e("p",[t._v("当前"),e("code",[t._v("Vue")]),t._v("版本为3.3.x，想升级"),e("code",[t._v("Vue")]),t._v("到3.4.x版本，但升级后，"),e("code",[t._v("ant-design-vue")]),t._v(" 3.x 版本的"),e("code",[t._v("Modal")]),t._v("函数方法有问题，如"),e("code",[t._v("Modal.confirm")]),t._v("打开后，取消确认按钮回调能执行，但是弹窗却无法关闭")]),t._v(" "),e("p",[t._v("于是到github的"),e("code",[t._v("ant-design-vue")]),t._v("库找的相关issue\n"),e("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/issues/7375",target:"_blank",rel:"noopener noreferrer"}},[t._v("#7375"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/issues/7239",target:"_blank",rel:"noopener noreferrer"}},[t._v("#7239"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("code",[t._v("ant-design-vue")]),t._v("团队合并了"),e("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/pull/7244/files",target:"_blank",rel:"noopener noreferrer"}},[t._v("pr"),e("OutboundLink")],1),t._v("并关掉了相关issue，但是修复代码只在4.x版本后，3.x仍存在该问题。相关修复如下：")]),t._v(" "),e("p",[e("img",{attrs:{src:s(542),alt:"alt text"}}),t._v(" "),e("img",{attrs:{src:s(543),alt:"alt text"}})]),t._v(" "),e("p",[t._v("而升级"),e("code",[t._v("ant-design-vue")]),t._v(" 4.x是破坏性升级，涉及到很多地方变动，没有办法升级。所以当时的解决方案是："),e("strong",[e("code",[t._v("Vue")]),t._v("版本固定在v3.3，"),e("code",[t._v("ant-design-vue")]),t._v("版本固定为v3.x")])]),t._v(" "),e("p",[t._v("但这样就不能用"),e("code",[t._v("Vue")]),t._v(" 3.4的新特性了")]),t._v(" "),e("h2",{attrs:{id:"升级vue为v3-5-x解决问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级vue为v3-5-x解决问题"}},[t._v("#")]),t._v(" 升级"),e("code",[t._v("Vue")]),t._v("为v3.5.x解决问题")]),t._v(" "),e("p",[t._v("因为还是想用"),e("code",[t._v("Vue")]),t._v("3.4的新特性，有空时去看"),e("code",[t._v("ant-design-vue")]),t._v("的issue，看会不会针对3.x版本修复这一问题，但应该是不会有的，不过发现有条评论说“"),e("code",[t._v("Vue")]),t._v("v3.5.13修复了这一问题”")]),t._v(" "),e("p",[t._v("然后就去升级试试，发现是v3.5.0修复了，升级v3.5.x后"),e("code",[t._v("Modal.confirm")]),t._v("弹窗顺利关闭了（不确定升级为v3.5.x是否会有其他问题，升级后需要在测试环境多多运行验证）")]),t._v(" "),e("h3",{attrs:{id:"v3-5是怎么解决的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v3-5是怎么解决的"}},[t._v("#")]),t._v(" v3.5是怎么解决的？")]),t._v(" "),e("p",[t._v("好奇v3.5是怎么解决的，就去github上看"),e("code",[t._v("Vue")]),t._v("的相关issue，看到有人提到和"),e("code",[t._v("ant-design-vue")]),t._v("的"),e("a",{attrs:{href:"https://github.com/vuejs/core/issues/9973",target:"_blank",rel:"noopener noreferrer"}},[t._v("相关问题"),e("OutboundLink")],1),t._v("，不过看"),e("a",{attrs:{href:"https://github.com/vuejs/core/blob/main/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Vue")]),t._v("的v3.5.0更新日志"),e("OutboundLink")],1),t._v("并没有提到这一issue，也没有找到其他相关更新说明")]),t._v(" "),e("p",[t._v("就根据"),e("code",[t._v("ant-design-vue")]),t._v("的修复代码，推测是"),e("code",[t._v("Vue")]),t._v(" v3.4被改动的"),e("code",[t._v("update")]),t._v("方法，在v3.5又改回来了")]),t._v(" "),e("p",[e("img",{attrs:{src:s(544),alt:"alt text"}})]),t._v(" "),e("p",[t._v("然后就去看"),e("code",[t._v("Vue")]),t._v("源码，推测相关改动（没有完整看完源码，是凭借关键字和代码提交时间推测的）")]),t._v(" "),e("p",[t._v("看下图代码改动，可以看出3.4版本判断了"),e("code",[t._v("effect.dirty")]),t._v("才去执行的，而3.4前和3.5后都是没有判断的。3.5后增加了"),e("code",[t._v("job")]),t._v("，"),e("code",[t._v("runIfDirty")]),t._v("执行，而"),e("code",[t._v("update")]),t._v("改回为无判断执行")]),t._v(" "),e("p",[t._v("左边为3.4后提交的，右边为3.5后提交的\n"),e("img",{attrs:{src:s(545),alt:"alt text"}})]),t._v(" "),e("p",[t._v("左边为3.4前提交的，右边为3.4后提交的\n"),e("img",{attrs:{src:s(546),alt:"alt text"}})]),t._v(" "),e("h2",{attrs:{id:"升级后的新特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级后的新特性"}},[t._v("#")]),t._v(" 升级后的新特性")]),t._v(" "),e("p",[t._v("从"),e("code",[t._v("vue")]),t._v("3.3升级到"),e("code",[t._v("vue")]),t._v("3.5的新特性，具体可看更新文档")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.vuejs.org/posts/vue-3-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("3.4更新文档"),e("OutboundLink")],1),t._v("\n（"),e("a",{attrs:{href:"https://juejin.cn/post/7317809451187208218?searchId=20250902174214673E19C04CEE8A1C2F50",target:"_blank",rel:"noopener noreferrer"}},[t._v("翻译版：https://juejin.cn/post/7317809451187208218?searchId=20250902174214673E19C04CEE8A1C2F50"),e("OutboundLink")],1),t._v("）")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.vuejs.org/posts/vue-3-5",target:"_blank",rel:"noopener noreferrer"}},[t._v("3.5更新文档"),e("OutboundLink")],1),t._v("\n（"),e("a",{attrs:{href:"https://juejin.cn/post/7410316451962142731?searchId=20250902175718A2E7B5955736D621881D",target:"_blank",rel:"noopener noreferrer"}},[t._v("翻译版：https://juejin.cn/post/7410316451962142731?searchId=20250902175718A2E7B5955736D621881D"),e("OutboundLink")],1),t._v("）")]),t._v(" "),e("h3",{attrs:{id:"其中比较有用的api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其中比较有用的api"}},[t._v("#")]),t._v(" 其中比较有用的api")]),t._v(" "),e("h4",{attrs:{id:"definemodel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#definemodel"}},[t._v("#")]),t._v(" "),e("code",[t._v("defineModel()")])]),t._v(" "),e("p",[t._v("3.4新增"),e("code",[t._v("defineModel()")]),t._v("，更方便地定义双向绑定，具体可看"),e("a",{attrs:{href:"https://cn.vuejs.org/api/sfc-script-setup#definemodel",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("在之前的版本，双向绑定是通过"),e("code",[t._v("defineProps")]),t._v("和"),e("code",[t._v("defineEmits")]),t._v("，有时再结合使用"),e("code",[t._v("vueuse")]),t._v("中的"),e("code",[t._v("useVModel")]),t._v("完成。")]),t._v(" "),e("p",[t._v("在3.4就可以直接使用一个"),e("code",[t._v("defineModel()")]),t._v("更快速的实现了，其底层辅助函数是"),e("a",{attrs:{href:"https://cn.vuejs.org/api/composition-api-helpers#usemodel",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("useModel()")]),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一般写法")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isVisible "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineModel")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'visible'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Boolean"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  required"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用ts的写法")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isVisible "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token generic-function"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineModel")]),e("span",{pre:!0,attrs:{class:"token generic class-name"}},[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'visible'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" required"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h4",{attrs:{id:"props-解构默认值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#props-解构默认值"}},[t._v("#")]),t._v(" "),e("code",[t._v("Props")]),t._v(" 解构默认值")]),t._v(" "),e("p",[t._v("3.5+新增"),e("code",[t._v("Props")]),t._v("解构默认值，更方便地设置默认值，具体可看"),e("a",{attrs:{href:"https://cn.vuejs.org/guide/typescript/composition-api#props-default-values",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("在之前的版本，"),e("code",[t._v("props")]),t._v("解构的写法并不能设置默认值，所以是用"),e("code",[t._v("withDefaults")]),t._v("设置默认值。")]),t._v(" "),e("p",[t._v("在3.5+后就可以直接以解构的方式设置来默认值，且仍可以保留响应式。")]),t._v(" "),e("p",[t._v("如果担心用解构写法后不好区分"),e("code",[t._v("props")]),t._v("，可以在Vue (Official)插件设置开启相关提示")]),t._v(" "),e("p",[e("img",{attrs:{src:s(547),alt:"alt text"}})]),t._v(" "),e("blockquote",[e("p",[t._v("注意：升级3.5后"),e("code",[t._v("withDefaults")]),t._v("仍可使用，但不要在同一个"),e("code",[t._v("props")]),t._v("同时使用解构和"),e("code",[t._v("withDefaults")])])]),t._v(" "),e("h4",{attrs:{id:"usetemplateref"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usetemplateref"}},[t._v("#")]),t._v(" "),e("code",[t._v("useTemplateRef()")])]),t._v(" "),e("p",[t._v("3.5+ 新增"),e("code",[t._v("useTemplateRef()")]),t._v("获取模板引用")]),t._v(" "),e("p",[t._v("在之前的版本，使用与静态 "),e("code",[t._v("ref")]),t._v("属性名称匹配的普通引用。")]),t._v(" "),e("p",[t._v("在3.5+后就可以使用"),e("code",[t._v("useTemplateRef()")]),t._v(" ，在运行时字符串ID匹配引用，因此支持将动态引用绑定到变化的ID")]),t._v(" "),e("p",[t._v("结合插件的升级，会有模板引用字符串的提示和组件相关提示，开发体验更好")]),t._v(" "),e("p",[e("img",{attrs:{src:s(548),alt:"alt text"}}),e("img",{attrs:{src:s(549),alt:"alt text"}})]),t._v(" "),e("h4",{attrs:{id:"watch-监听函数相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#watch-监听函数相关"}},[t._v("#")]),t._v(" "),e("code",[t._v("watch")]),t._v(" 监听函数相关")]),t._v(" "),e("p",[e("code",[t._v("once")]),t._v("：(3.4+) 回调函数只会运行一次。第三个可选的参数增加了"),e("code",[t._v("once")]),t._v("，侦听器将在回调函数首次运行后自动停止。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  source"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当 `source` 变化时，仅触发一次")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("once")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[e("code",[t._v("stop")]),t._v(", "),e("code",[t._v("pause")]),t._v(", "),e("code",[t._v("resume")]),t._v(" ：(3.5+) 暂停/恢复侦听器")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" stop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pause"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resume "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 暂停侦听器")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pause")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 稍后恢复")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 停止")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("Vssue",{staticClass:"theme-default-content content__default"})],1)}),[],!1,null,null,null);e.default=n.exports}}]);